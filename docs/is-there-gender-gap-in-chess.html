<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Is there gender gap in Chess? | _main.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Is there gender gap in Chess? | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Is there gender gap in Chess? | _main.knit" />
  
  
  

<meta name="author" content="Vishu Tyagi" />


<meta name="date" content="2023-01-20" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  


<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Chess Gender Gap</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="01-intro.html"><a href="#is-there-gender-gap-in-chess"><i class="fa fa-check"></i><b>1</b> Is there gender gap in Chess?</a>
<ul>
<li class="chapter" data-level="1.1" data-path="01-intro.html"><a href="#fide-ratings"><i class="fa fa-check"></i><b>1.1</b> FIDE Ratings</a></li>
<li class="chapter" data-level="1.2" data-path="01-intro.html"><a href="#hypothesis"><i class="fa fa-check"></i><b>1.2</b> Hypothesis</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="01-intro.html"><a href="#test-statistic"><i class="fa fa-check"></i><b>1.2.1</b> Test Statistic</a></li>
<li class="chapter" data-level="1.2.2" data-path="01-intro.html"><a href="#p-value"><i class="fa fa-check"></i><b>1.2.2</b> p-value</a></li>
<li class="chapter" data-level="1.2.3" data-path="01-intro.html"><a href="#procedure"><i class="fa fa-check"></i><b>1.2.3</b> Procedure</a></li>
<li class="chapter" data-level="1.2.4" data-path="01-intro.html"><a href="#significance-level-type-i-error-α"><i class="fa fa-check"></i><b>1.2.4</b> Significance Level / Type I error (α)</a></li>
<li class="chapter" data-level="1.2.5" data-path="01-intro.html"><a href="#type-ii-error-β"><i class="fa fa-check"></i><b>1.2.5</b> Type II error (β)</a></li>
<li class="chapter" data-level="1.2.6" data-path="01-intro.html"><a href="#decision"><i class="fa fa-check"></i><b>1.2.6</b> Decision</a></li>
<li class="chapter" data-level="1.2.7" data-path="01-intro.html"><a href="#permutation-test"><i class="fa fa-check"></i><b>1.2.7</b> Permutation Test</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="01-intro.html"><a href="#statistical-analysis"><i class="fa fa-check"></i><b>1.3</b> Statistical Analysis</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="01-intro.html"><a href="#observation"><i class="fa fa-check"></i><b>1.3.1</b> Observation</a></li>
<li class="chapter" data-level="1.3.2" data-path="01-intro.html"><a href="#permutation-step"><i class="fa fa-check"></i><b>1.3.2</b> Permutation Step</a></li>
<li class="chapter" data-level="1.3.3" data-path="01-intro.html"><a href="#repeating-permutation-step"><i class="fa fa-check"></i><b>1.3.3</b> Repeating Permutation Step</a></li>
<li class="chapter" data-level="1.3.4" data-path="01-intro.html"><a href="#p-value-1"><i class="fa fa-check"></i><b>1.3.4</b> p-value</a></li>
<li class="chapter" data-level="1.3.5" data-path="01-intro.html"><a href="#decision-1"><i class="fa fa-check"></i><b>1.3.5</b> Decision</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="01-intro.html"><a href="#case-of-india"><i class="fa fa-check"></i><b>1.4</b> Case of India</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="01-intro.html"><a href="#observation-1"><i class="fa fa-check"></i><b>1.4.1</b> Observation</a></li>
<li class="chapter" data-level="1.4.2" data-path="01-intro.html"><a href="#p-value-2"><i class="fa fa-check"></i><b>1.4.2</b> p-value</a></li>
<li class="chapter" data-level="1.4.3" data-path="01-intro.html"><a href="#decision-2"><i class="fa fa-check"></i><b>1.4.3</b> Decision</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="01-intro.html"><a href="#comparing-top-players"><i class="fa fa-check"></i><b>1.5</b> Comparing Top Players</a>
<ul>
<li class="chapter" data-level="1.5.1" data-path="01-intro.html"><a href="#hypothesis-1"><i class="fa fa-check"></i><b>1.5.1</b> Hypothesis</a></li>
<li class="chapter" data-level="1.5.2" data-path="01-intro.html"><a href="#observation-2"><i class="fa fa-check"></i><b>1.5.2</b> Observation</a></li>
<li class="chapter" data-level="1.5.3" data-path="01-intro.html"><a href="#permutation-step-1"><i class="fa fa-check"></i><b>1.5.3</b> Permutation Step</a></li>
<li class="chapter" data-level="1.5.4" data-path="01-intro.html"><a href="#repeating-permutation-step-1"><i class="fa fa-check"></i><b>1.5.4</b> Repeating Permutation Step</a></li>
<li class="chapter" data-level="1.5.5" data-path="01-intro.html"><a href="#p-value-3"><i class="fa fa-check"></i><b>1.5.5</b> p-value</a></li>
<li class="chapter" data-level="1.5.6" data-path="01-intro.html"><a href="#decision-3"><i class="fa fa-check"></i><b>1.5.6</b> Decision</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="01-intro.html"><a href="#case-of-india-top-players"><i class="fa fa-check"></i><b>1.6</b> Case of India: Top Players</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="01-intro.html"><a href="#observation-3"><i class="fa fa-check"></i><b>1.6.1</b> Observation</a></li>
<li class="chapter" data-level="1.6.2" data-path="01-intro.html"><a href="#p-value-4"><i class="fa fa-check"></i><b>1.6.2</b> p-value</a></li>
<li class="chapter" data-level="1.6.3" data-path="01-intro.html"><a href="#decision-4"><i class="fa fa-check"></i><b>1.6.3</b> Decision</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="01-intro.html"><a href="#conclusion"><i class="fa fa-check"></i><b>1.7</b> Conclusion</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="is-there-gender-gap-in-chess" class="section level1 hasAnchor" number="1">
<h1><span class="header-section-number">Chapter 1</span> Is there gender gap in Chess?<a href="#is-there-gender-gap-in-chess" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="fide-ratings" class="section level2 hasAnchor" number="1.1">
<h2><span class="header-section-number">1.1</span> FIDE Ratings<a href="#fide-ratings" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I downloaded the <a href="http://ratings.fide.com/download/standard_dec22frl_xml.zip">Dec 2022, FIDE Standard rating list</a> in XML format and parsed it as CSV in Python and removed all junior players born after 2002. See here for the <a href="https://github.com/vishu-tyagi/Chess-Gender-Gap">github repository</a>. This is how it looks like,</p>
<pre><code>##     fideid             name country sex title rating birthday
## 1 25121731       A C J John     IND   M         1063     1987
## 2 35077023   A Chakravarthy     IND   M         1151     1986
## 3 10207538 A E M, Doshtagir     BAN   M         1840     1974</code></pre>
<pre><code>## Number of players: 300,912</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-3-1.png" width="576" style="display: block; margin: auto;" /></p>
<p>The above graph shows that the proportion of female chess players in any given rating interval is roughly equal to the proportion of male chess players. However, we notice that the female rating distribution lies to the left of male.</p>
<p>Hence, the <strong>research question</strong> is,</p>
<ul>
<li>whether the two distributions are same, and the shift is due to random chance, or</li>
<li>the ratings of male chess players tend to be larger compared to female players and the shift is (statistically) significant</li>
</ul>
</div>
<div id="hypothesis" class="section level2 hasAnchor" number="1.2">
<h2><span class="header-section-number">1.2</span> Hypothesis<a href="#hypothesis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let M and F be the underlying unspecified distributions for the ratings of male and female players, respectively. We assume,</p>
<ul>
<li>the ratings of male players are independent of each other</li>
<li>the ratings of female players are independent of each other</li>
<li>the ratings of male players are independent of the female players</li>
</ul>
<p>These assumptions are speculative because the FIDE rating system is based on a player’s performance relative to other players and not on their absolute skill level. For instance, most female players tend to play in an only-female pool with a relatively lower rating cap than the open pool. Players will tend to have lower ratings if a pool has a lower rating cap than a pool with a higher cap.</p>
<p>Keeping this in mind, we devise the following one-sided test to answer the research question,</p>
<ul>
<li><p><strong>Null Hypothesis:</strong> M = F, the two distributions are same</p></li>
<li><p><strong>Alternative Hypothesis:</strong> Ratings from M tend to be larger than ratings from F</p></li>
</ul>
<div id="test-statistic" class="section level3 hasAnchor" number="1.2.1">
<h3><span class="header-section-number">1.2.1</span> Test Statistic<a href="#test-statistic" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Under the Null Hypothesis, all ratings are independent and identically distributed. If we sample (without replacement) as many ratings as there are female players, the sampled ratings are equally likely to be the ratings of female players.</p>
<p>Because the alternative hypothesis is that ratings from distribution F tend to be smaller than ratings from distribution M, a reasonable test would be to</p>
<ul>
<li>reject the null hypothesis if the sum of sampled ratings is smaller than might be expected by chance</li>
</ul>
<p>Hence, we choose <span class="math inline">\(\sum\limits_i F_i\)</span> as our test statistic where <span class="math inline">\(F_i\)</span> are ratings of female players</p>
</div>
<div id="p-value" class="section level3 hasAnchor" number="1.2.2">
<h3><span class="header-section-number">1.2.2</span> p-value<a href="#p-value" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The probability of observing results as extreme as the observed results under the Null probability model.</li>
<li>That is, <span class="math inline">\(\text{Pr}(\sum\limits_i F_i) &lt; t\)</span>, where <span class="math inline">\(t\)</span> is the observed test statistic, which is the sum of actual ratings of female players.</li>
</ul>
</div>
<div id="procedure" class="section level3 hasAnchor" number="1.2.3">
<h3><span class="header-section-number">1.2.3</span> Procedure<a href="#procedure" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Assume the Null hypothesis is true and create the corresponding Null probability model.</li>
<li>Test whether the observed sum of ratings is a reasonable outcome of the Null probability model.</li>
<li>Or whether the observed sum of ratings is within the random variability of the Null model.</li>
</ul>
</div>
<div id="significance-level-type-i-error-α" class="section level3 hasAnchor" number="1.2.4">
<h3><span class="header-section-number">1.2.4</span> Significance Level / Type I error (α)<a href="#significance-level-type-i-error-α" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The probability of rejecting a true Null hypothesis.</li>
<li>Must be defined before the experiment.</li>
<li>We will set α = 0.05</li>
</ul>
</div>
<div id="type-ii-error-β" class="section level3 hasAnchor" number="1.2.5">
<h3><span class="header-section-number">1.2.5</span> Type II error (β)<a href="#type-ii-error-β" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>The probability of failing to reject a false Null hypothesis.</li>
<li><strong>Power (1-β):</strong> The probability of rejecting a false Null hypothesis.</li>
</ul>
</div>
<div id="decision" class="section level3 hasAnchor" number="1.2.6">
<h3><span class="header-section-number">1.2.6</span> Decision<a href="#decision" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>α ≥ p-value: Reject the Null hypothesis, and conclude enough evidence to claim the ratings of male players tend to be larger than those of female players</li>
<li>α &lt; p-value: Fail to reject the Null hypothesis, and conclude lack thereof</li>
</ul>
</div>
<div id="permutation-test" class="section level3 hasAnchor" number="1.2.7">
<h3><span class="header-section-number">1.2.7</span> Permutation Test<a href="#permutation-test" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Non-parametric procedure, makes no specific assumptions about the form of any underlying probability distributions</li>
<li>Assumes the data is independent and identically distributed (i.i.d) under the null hypothesis</li>
<li>Given the size of data, full permutation test will not be possible. We will stick to randomization test.</li>
</ul>
</div>
</div>
<div id="statistical-analysis" class="section level2 hasAnchor" number="1.3">
<h2><span class="header-section-number">1.3</span> Statistical Analysis<a href="#statistical-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="observation" class="section level3 hasAnchor" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Observation<a href="#observation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>T_ratings <span class="ot">=</span> df<span class="sc">$</span>rating   <span class="co"># All ratings</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>M_ratings <span class="ot">=</span> df[df<span class="sc">$</span>sex<span class="sc">==</span><span class="st">&#39;M&#39;</span>,]<span class="sc">$</span>rating   <span class="co"># Ratings of male players</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>F_ratings <span class="ot">=</span> df[df<span class="sc">$</span>sex<span class="sc">==</span><span class="st">&#39;F&#39;</span>,]<span class="sc">$</span>rating   <span class="co"># Ratings of female players</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>T_count <span class="ot">=</span> <span class="fu">length</span>(T_ratings)    <span class="co"># Total players</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>M_count <span class="ot">=</span> <span class="fu">length</span>(M_ratings)    <span class="co"># Number of male players</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>F_count <span class="ot">=</span> <span class="fu">length</span>(F_ratings)    <span class="co"># Number of female players</span></span></code></pre></div>
<pre><code>## Total players                    : 300,912 
## Number of male chess players     : 276,404 
## Number of female chess players   : 24,508</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>M_observed <span class="ot">=</span> <span class="fu">sum</span>(M_ratings)   <span class="co"># Sum of ratings of male players</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>F_observed <span class="ot">=</span> <span class="fu">sum</span>(F_ratings)   <span class="co"># Sum of ratings of female players</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>t_observed <span class="ot">=</span> F_observed       <span class="co"># Observed test statistic</span></span></code></pre></div>
<pre><code>## Observed sum of male ratings     : 476,121,060 
## Observed sum of female ratings   : 39,727,256 
## Observed test statistic          : 39,727,256</code></pre>
</div>
<div id="permutation-step" class="section level3 hasAnchor" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Permutation Step<a href="#permutation-step" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">0</span>) <span class="co"># For reproducibility</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>T_ratings <span class="ot">=</span> <span class="fu">sample</span>(T_ratings)     <span class="co"># Shuffle all ratings once</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>F_ratings <span class="ot">=</span> <span class="fu">sample</span>(T_ratings, <span class="at">size=</span>F_count, <span class="at">replace=</span><span class="cn">FALSE</span>)  <span class="co"># Sample female ratings</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> <span class="fu">sum</span>(F_ratings)  <span class="co"># Calculate test statistic</span></span></code></pre></div>
<pre><code>## (1) Resampled test statistic : 41,949,397 
## (2) Observed test statistic  : 39,727,256</code></pre>
</div>
<div id="repeating-permutation-step" class="section level3 hasAnchor" number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Repeating Permutation Step<a href="#repeating-permutation-step" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat steps a &#39;large number of times&#39; (p)</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">=</span> <span class="dv">1000</span> <span class="co"># Number of permutations</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>perm_res <span class="ot">=</span> <span class="fu">rep</span>(<span class="dv">0</span>, p)  <span class="co"># Vector for saving permutation results</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>p) {</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  F_ratings <span class="ot">=</span> <span class="fu">sample</span>(T_ratings, <span class="at">size=</span>F_count, <span class="at">replace=</span><span class="cn">FALSE</span>)  <span class="co"># Sample female ratings</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  t <span class="ot">=</span> <span class="fu">sum</span>(F_ratings)  <span class="co"># Calculate test statistic</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  perm_res[i] <span class="ot">=</span> t   <span class="co"># Save test statistic</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="p-value-1" class="section level3 hasAnchor" number="1.3.4">
<h3><span class="header-section-number">1.3.4</span> p-value<a href="#p-value-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One way hypothesis test (Null: M = F, Alternative: M &gt; F)</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>extreme_count <span class="ot">=</span> <span class="fu">sum</span>(perm_res <span class="sc">&lt;=</span> t_observed)</span></code></pre></div>
<pre><code>## Number of permutations           : 1,000 
## One-way: Extreme count           : 0 
## One-way: Extreme ratio (p-value) : 0</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-14-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="decision-1" class="section level3 hasAnchor" number="1.3.5">
<h3><span class="header-section-number">1.3.5</span> Decision<a href="#decision-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We reject the Null hypothesis and conclude the ratings of male players tend to be larger than those of female players.</p>
</div>
</div>
<div id="case-of-india" class="section level2 hasAnchor" number="1.4">
<h2><span class="header-section-number">1.4</span> Case of India<a href="#case-of-india" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s do the same analysis for Indian chess players</p>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="576" style="display: block; margin: auto;" /></p>
<div id="observation-1" class="section level3 hasAnchor" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Observation<a href="#observation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## Total players                    : 24,403 
## Number of male chess players     : 22,509 
## Number of female chess players   : 1,894</code></pre>
<pre><code>## Observed sum of male ratings     : 31,460,849 
## Observed sum of female ratings   : 2,632,409 
## Observed test statistic          : 2,632,409</code></pre>
</div>
<div id="p-value-2" class="section level3 hasAnchor" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> p-value<a href="#p-value-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## Number of permutations           : 1,000 
## One-way: Extreme count           : 116 
## One-way: Extreme ratio (p-value) : 0.116</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="decision-2" class="section level3 hasAnchor" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Decision<a href="#decision-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We conclude lack of evidence to support the claim that in India, male players tend to have a larger rating than female players. This makes me proud as an avid follower of the chess scene in India.</p>
</div>
</div>
<div id="comparing-top-players" class="section level2 hasAnchor" number="1.5">
<h2><span class="header-section-number">1.5</span> Comparing Top Players<a href="#comparing-top-players" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We can also compare top rated male and female players</p>
<pre><code>## Highest rated male player: Carlsen, Magnus rated 2859 
## Highest rated female player: Polgar, Judit rated 2675 
## Difference (M-F): 184</code></pre>
<p>We can try to answer yet another question,</p>
<ul>
<li>Is this difference just due to random chance?</li>
<li>Or, is it (statistically) significant?</li>
</ul>
<div id="hypothesis-1" class="section level3 hasAnchor" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Hypothesis<a href="#hypothesis-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Instead of comparing the highest rated players, we will take into account the 10 highest rated players. So, our test statistic becomes <span class="math inline">\(M-F\)</span> with <span class="math inline">\(M = \frac{1}{10}\sum\limits_{i=1}^{10} M_{(i)}\)</span> and <span class="math inline">\(F = \frac{1}{10}\sum\limits_{i=1}^{10} F_{(i)}\)</span> where <span class="math inline">\(M_{(i)}\)</span> and <span class="math inline">\(F_{(i)}\)</span> are ordered statistics. The hypothesis is then,</p>
<ul>
<li><strong>Null Hypothesis:</strong> Observed difference is due to random chance (M - F = 0)</li>
<li><strong>Alternative Hypothesis:</strong> Observed difference is real (M - F &gt; 0) and the top rated male players are significantly higher rated than the top rated female players</li>
</ul>
</div>
<div id="observation-2" class="section level3 hasAnchor" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Observation<a href="#observation-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>T_ratings <span class="ot">=</span> df<span class="sc">$</span>rating   <span class="co"># All ratings</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>M_ratings <span class="ot">=</span> df[df<span class="sc">$</span>sex<span class="sc">==</span><span class="st">&#39;M&#39;</span>,]<span class="sc">$</span>rating   <span class="co"># Ratings of male players</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>F_ratings <span class="ot">=</span> df[df<span class="sc">$</span>sex<span class="sc">==</span><span class="st">&#39;F&#39;</span>,]<span class="sc">$</span>rating   <span class="co"># Ratings of female players</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>T_count <span class="ot">=</span> <span class="fu">length</span>(T_ratings)    <span class="co"># Total players</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>M_count <span class="ot">=</span> <span class="fu">length</span>(M_ratings)    <span class="co"># Number of male players</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>F_count <span class="ot">=</span> <span class="fu">length</span>(F_ratings)    <span class="co"># Number of female players</span></span></code></pre></div>
<pre><code>## Total players: 300,912 
## Number of male chess players: 276,404 
## Number of female chess players: 24,508</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>M_observed <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(M_ratings), <span class="at">size=</span><span class="dv">10</span>))   <span class="co"># Mean rating of male players</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>F_observed <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(F_ratings), <span class="at">size=</span><span class="dv">10</span>))   <span class="co"># Mean rating of female players</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>t_observed <span class="ot">=</span> M_observed <span class="sc">-</span> F_observed    <span class="co"># Observed test statistic</span></span></code></pre></div>
<pre><code>## Observed mean rating of top male players: 2,801.5 
## Observed mean rating of top female players: 2,603.333 
## Observed test statistic: 198.1667</code></pre>
</div>
<div id="permutation-step-1" class="section level3 hasAnchor" number="1.5.3">
<h3><span class="header-section-number">1.5.3</span> Permutation Step<a href="#permutation-step-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>T_ratings <span class="ot">=</span> <span class="fu">sample</span>(T_ratings) <span class="co"># Shuffle all ratings</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>M_ratings <span class="ot">=</span> T_ratings[<span class="dv">1</span><span class="sc">:</span>M_count]  <span class="co"># Sample male ratings</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>F_ratings <span class="ot">=</span> T_ratings[((M_count<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>T_count)]  <span class="co"># Sample female ratings</span></span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>M <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(M_ratings), <span class="at">size=</span><span class="dv">10</span>))   <span class="co"># Mean rating of male players</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>F <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(F_ratings), <span class="at">size=</span><span class="dv">10</span>))   <span class="co"># Mean rating of female players players</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>t <span class="ot">=</span> M <span class="sc">-</span> F    <span class="co"># Observed test statistic</span></span></code></pre></div>
<pre><code>## (1) Resampled test statistic         : 85.66667 
## (2) Observed test statistic          : 198.1667</code></pre>
</div>
<div id="repeating-permutation-step-1" class="section level3 hasAnchor" number="1.5.4">
<h3><span class="header-section-number">1.5.4</span> Repeating Permutation Step<a href="#repeating-permutation-step-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat steps a &#39;large number of times&#39; (p)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>p <span class="ot">=</span> <span class="dv">1000</span> <span class="co"># Number of permutations</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>perm_res <span class="ot">=</span> <span class="fu">rep</span>(<span class="dv">0</span>, p)  <span class="co"># Vector for saving permutation results</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>p) {</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  T_ratings <span class="ot">=</span> <span class="fu">sample</span>(T_ratings) <span class="co"># Shuffle all ratings</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  M_ratings <span class="ot">=</span> T_ratings[<span class="dv">1</span><span class="sc">:</span>M_count]  <span class="co"># Sample male ratings</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  F_ratings <span class="ot">=</span> T_ratings[((M_count<span class="sc">+</span><span class="dv">1</span>)<span class="sc">:</span>T_count)]  <span class="co"># Sample female ratings players</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  M <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(M_ratings), <span class="at">size=</span><span class="dv">10</span>))   <span class="co"># Mean rating of male players</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  F <span class="ot">=</span> <span class="fu">mean</span>(<span class="fu">tail</span>(<span class="fu">sort</span>(F_ratings), <span class="at">size=</span><span class="dv">10</span>))   <span class="co"># Mean rating of female players</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  t <span class="ot">=</span> M <span class="sc">-</span> F    <span class="co"># Observed test statistic</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  perm_res[i] <span class="ot">=</span> t</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="p-value-3" class="section level3 hasAnchor" number="1.5.5">
<h3><span class="header-section-number">1.5.5</span> p-value<a href="#p-value-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># One way hypothesis test (Null: M - F = 0, Alternative: M - F &gt; 0)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>extreme_count <span class="ot">=</span> <span class="fu">sum</span>(perm_res <span class="sc">&gt;=</span> t_observed)</span></code></pre></div>
<pre><code>## Number of permutations           : 1,000 
## One-way: Extreme count           : 0 
## One-way: Extreme ratio (p-value) : 0</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-39-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="decision-3" class="section level3 hasAnchor" number="1.5.6">
<h3><span class="header-section-number">1.5.6</span> Decision<a href="#decision-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We conclude that top rated male players are significantly higher rated than the top rated female players.</p>
</div>
</div>
<div id="case-of-india-top-players" class="section level2 hasAnchor" number="1.6">
<h2><span class="header-section-number">1.6</span> Case of India: Top Players<a href="#case-of-india-top-players" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<pre><code>## Highest rated male player: Anand, Viswanathan rated 2754 
## Highest rated female player: Koneru, Humpy rated 2572 
## Difference (M-F): 182</code></pre>
<div id="observation-3" class="section level3 hasAnchor" number="1.6.1">
<h3><span class="header-section-number">1.6.1</span> Observation<a href="#observation-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## Total players: 24,403 
## Number of male chess players: 22,509 
## Number of female chess players: 1,894</code></pre>
<pre><code>## Observed mean rating of top male players: 2,689.833 
## Observed mean rating of top female players: 2,440 
## Observed test statistic: 249.8333</code></pre>
</div>
<div id="p-value-4" class="section level3 hasAnchor" number="1.6.2">
<h3><span class="header-section-number">1.6.2</span> p-value<a href="#p-value-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<pre><code>## Number of permutations           : 1,000 
## One-way: Extreme count           : 128 
## One-way: Extreme ratio (p-value) : 0.128</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-50-1.png" width="576" style="display: block; margin: auto;" /></p>
</div>
<div id="decision-4" class="section level3 hasAnchor" number="1.6.3">
<h3><span class="header-section-number">1.6.3</span> Decision<a href="#decision-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We conclude a lack of evidence to support the claim that in India, the top rated male players are outperforming the top rated female players.</p>
</div>
</div>
<div id="conclusion" class="section level2 hasAnchor" number="1.7">
<h2><span class="header-section-number">1.7</span> Conclusion<a href="#conclusion" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
            </section>

          </div>
        </div>
      </div>


    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/vishu-tyagi/Chess-Gender-Gap/edit/BRANCH/01-intro.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
